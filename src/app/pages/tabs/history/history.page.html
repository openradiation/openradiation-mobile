<app-header>Historique</app-header>

<ion-content>
    <ion-list>
        <ion-item *ngFor="let measure of measures$ | async" class="clickable-device" button
                  (click)="showDetail(measure)">
            <ion-label>
                <div>
                    {{measure.startTime | date : 'dd/MM/yyyy HH:mm:ss'}}
                </div>
                <div class="value">
                    {{measure.value | number: '1.3-3'}} μSvh
                </div>
            </ion-label>
            <ng-container *ngIf="measure.sent; else measureNotSent">
                <div class="state">
                    Publiée
                </div>
            </ng-container>
            <ng-template #measureNotSent>
                <ion-button class="inner-button" fill="clear"
                            size="default"
                            (click)="publish(measure)">
                    <img src="assets/img/icon-publish.png">
                </ion-button>
                <ion-button class="inner-button" fill="clear"
                            size="default"
                            (click)="delete(measure)">
                    <img src="assets/img/icon-delete.png">
                </ion-button>
            </ng-template>
        </ion-item>
    </ion-list>
</ion-content>
