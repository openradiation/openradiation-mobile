<ng-container>
  <app-header homeMode="true">{{'HOME.TITLE' | translate}}</app-header>

  <ion-content>
    <div class="content">
      <app-gps-indicator homeMode="true" [accuracy]="positionAccuracy$ | async"></app-gps-indicator>
      <div class="sensor-container" [ngClass]="{ sensorConnected: (connectedDevice$ | async) }">
        <div class="sensor-status">
          <ion-icon
            size="large"
            [name]="(connectedDevice$ | async) ?  'checkmark-outline' : 'close-outline' "
          ></ion-icon>
        </div>

        <ng-container *ngIf="connectedDevice$ | async as connectedDevice; else noConnectedDevice">
          <div class="sensor-actions">
            <span class="sensor-text">
              {{ 'HOME.CONNECTED_SENSOR' | translate }} {{ connectedDevice.apparatusVersion}}</span
            >
            <ion-button (click)="goToDevices()">
              <span class="sensor-button"> {{'HOME.CHANGE_SENSOR' | translate}} </span></ion-button
            >
          </div>
        </ng-container>
        <ng-template #noConnectedDevice>
          <div class="sensor-actions">
            <span class="sensor-text"> {{ 'HOME.NO_SENSORS' | translate }}</span>
            <ion-button (click)="goToDevices()">
              <span class="sensor-button">{{'HOME.CONNECT_SENSOR' | translate}} </span></ion-button
            >
          </div>
        </ng-template>
      </div>

      <ng-container *ngIf="planeMode$ | async; else groundLevel">
        <div class="button-component">
          <app-double-button
            [headerMessage]="'HOME.MEASURE_MODE' | translate"
            [mainMessage]="'GENERAL.ON_PLANE' | translate"
            [modeSimple]="false"
            (click)="goToPlaneMode()"
          ></app-double-button>
        </div>
      </ng-container>
      <ng-template #groundLevel>
        <div class="button-component">
          <app-double-button
            [headerMessage]="'HOME.MEASURE_MODE' | translate"
            [mainMessage]="'GENERAL.ON_GROUND' | translate"
            [modeSimple]="false"
            (click)="goToPlaneMode()"
          ></app-double-button>
        </div>
      </ng-template>
      <span *ngIf="(canStartMeasure | async)" class="launch-mesure">Lancer la mesure</span>
      <app-round-button
        class="main"
        [disabled]="!(canStartMeasure | async)"
        [srcOn]="'assets/img/button-start-measure-on.png'"
        [srcOff]="'assets/img/button-start-measure-off.png'"
        (click)="startMeasure()"
      >
      </app-round-button>
    </div>
  </ion-content>
</ng-container>
